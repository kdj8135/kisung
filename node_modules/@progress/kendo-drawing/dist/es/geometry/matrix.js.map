{"version":3,"file":"matrix.js","sources":["matrix.js"],"sourcesContent":["import { Class } from '../common';\nimport { defined, rad, round } from '../util';\n\nclass Matrix extends Class {\n\n    constructor(a = 0, b = 0, c = 0, d = 0, e = 0, f = 0) {\n        super();\n\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.e = e;\n        this.f = f;\n    }\n\n    multiplyCopy(matrix) {\n        return new Matrix(\n            this.a * matrix.a + this.c * matrix.b,\n            this.b * matrix.a + this.d * matrix.b,\n            this.a * matrix.c + this.c * matrix.d,\n            this.b * matrix.c + this.d * matrix.d,\n            this.a * matrix.e + this.c * matrix.f + this.e,\n            this.b * matrix.e + this.d * matrix.f + this.f\n        );\n    }\n\n    invert() {\n        const { a, b, c: d, d: e, e: g, f: h } = this;\n        const det = a * e - b * d;\n\n        if (det === 0) {\n            return null;\n        }\n\n        return new Matrix(e / det, -b / det, -d / det, a / det,\n                          (d * h - e * g) / det, (b * g - a * h) / det);\n    }\n\n    clone() {\n        return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n    }\n\n    equals(other) {\n        if (!other) {\n            return false;\n        }\n\n        return this.a === other.a && this.b === other.b &&\n               this.c === other.c && this.d === other.d &&\n               this.e === other.e && this.f === other.f;\n    }\n\n    round(precision) {\n        this.a = round(this.a, precision);\n        this.b = round(this.b, precision);\n        this.c = round(this.c, precision);\n        this.d = round(this.d, precision);\n        this.e = round(this.e, precision);\n        this.f = round(this.f, precision);\n\n        return this;\n    }\n\n    toArray(precision) {\n        const result = [ this.a, this.b, this.c, this.d, this.e, this.f ];\n\n        if (defined(precision)) {\n            for (let i = 0; i < result.length; i++) {\n                result[i] = round(result[i], precision);\n            }\n        }\n\n        return result;\n    }\n\n    toString(precision, separator = \",\") {\n        return this.toArray(precision).join(separator);\n    }\n\n    static translate(x, y) {\n        return new Matrix(1, 0, 0, 1, x, y);\n    }\n\n    static unit() {\n        return new Matrix(1, 0, 0, 1, 0, 0);\n    }\n\n    static rotate(angle, x, y) {\n        const matrix = new Matrix();\n        matrix.a = Math.cos(rad(angle));\n        matrix.b = Math.sin(rad(angle));\n        matrix.c = -matrix.b;\n        matrix.d = matrix.a;\n        matrix.e = (x - x * matrix.a + y * matrix.b) || 0;\n        matrix.f = (y - y * matrix.a - x * matrix.b) || 0;\n\n        return matrix;\n    }\n\n    static scale(scaleX, scaleY) {\n        return new Matrix(scaleX, 0, 0, scaleY, 0, 0);\n    }\n}\n\nMatrix.IDENTITY = Matrix.unit();\n\nexport default Matrix;"],"names":["super","const","let"],"mappings":"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"}