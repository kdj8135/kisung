{"version":3,"file":"elements-array.js","sources":["elements-array.js"],"sourcesContent":["import ObserversMixin from '../mixins/observers-mixin';\nimport { Class } from '../common';\n\nconst push = [].push;\nconst pop = [].pop;\nconst splice = [].splice;\nconst shift = [].shift;\nconst slice = [].slice;\nconst unshift = [].unshift;\n\nclass ElementsArray extends Class {\n    constructor(array = []) {\n        super();\n\n        this.length = 0;\n        this._splice(0, array.length, array);\n    }\n\n    elements(value) {\n        if (value) {\n            this._splice(0, this.length, value);\n\n            this._change();\n            return this;\n        }\n\n        return this.slice(0);\n    }\n\n    push() {\n        const elements = arguments;\n        const result = push.apply(this, elements);\n\n        this._add(elements);\n\n        return result;\n    }\n\n    slice() {\n        return slice.call(this);\n    }\n\n    pop() {\n        const length = this.length;\n        const result = pop.apply(this);\n\n        if (length) {\n            this._remove([ result ]);\n        }\n\n        return result;\n    }\n\n    splice(index, howMany) {\n        const elements = slice.call(arguments, 2);\n        const result = this._splice(index, howMany, elements);\n\n        this._change();\n\n        return result;\n    }\n\n    shift() {\n        const length = this.length;\n        const result = shift.apply(this);\n\n        if (length) {\n            this._remove([ result ]);\n        }\n\n        return result;\n    }\n\n    unshift() {\n        const elements = arguments;\n        const result = unshift.apply(this, elements);\n\n        this._add(elements);\n\n        return result;\n    }\n\n    indexOf(element) {\n        const length = this.length;\n\n        for (let idx = 0; idx < length; idx++) {\n            if (this[idx] === element) {\n                return idx;\n            }\n        }\n        return -1;\n    }\n\n    _splice(index, howMany, elements) {\n        const result = splice.apply(this, [ index, howMany ].concat(elements));\n\n        this._clearObserver(result);\n        this._setObserver(elements);\n\n        return result;\n    }\n\n    _add(elements) {\n        this._setObserver(elements);\n        this._change();\n    }\n\n    _remove(elements) {\n        this._clearObserver(elements);\n        this._change();\n    }\n\n    _setObserver(elements) {\n        for (let idx = 0; idx < elements.length; idx++) {\n            elements[idx].addObserver(this);\n        }\n    }\n\n    _clearObserver(elements) {\n        for (let idx = 0; idx < elements.length; idx++) {\n            elements[idx].removeObserver(this);\n        }\n    }\n\n    _change() {}\n}\n\nObserversMixin.extend(ElementsArray.prototype);\n\nexport default ElementsArray;\n"],"names":["const","super","let","this"],"mappings":"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"}