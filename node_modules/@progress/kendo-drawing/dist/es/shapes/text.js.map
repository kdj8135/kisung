{"version":3,"file":"text.js","sources":["text.js"],"sourcesContent":["import Element from './element';\nimport Point from '../geometry/point';\nimport Rect from '../geometry/rect';\nimport toMatrix from '../geometry/to-matrix';\nimport Paintable from '../mixins/paintable';\nimport definePointAccessors from '../accessors/define-point-accessors';\nimport { defined, measureText } from '../util';\n\nconst DEFAULT_FONT = \"12px sans-serif\";\nconst DEFAULT_FILL = \"#000\";\n\nclass Text extends Element {\n\n    constructor(content, position = new Point(), options = {}) {\n        super(options);\n\n        this.content(content);\n        this.position(position);\n\n        if (!this.options.font) {\n            this.options.font = DEFAULT_FONT;\n        }\n\n        if (!defined(this.options.fill)) {\n            this.fill(DEFAULT_FILL);\n        }\n    }\n\n    content(value) {\n        if (defined(value)) {\n            this.options.set(\"content\", value);\n            return this;\n        }\n\n        return this.options.get(\"content\");\n    }\n\n    measure() {\n        const metrics = measureText(this.content(), {\n            font: this.options.get(\"font\")\n        });\n\n        return metrics;\n    }\n\n    rect() {\n        const size = this.measure();\n        const pos = this.position().clone();\n        return new Rect(pos, [ size.width, size.height ]);\n    }\n\n    bbox(transformation) {\n        const combinedMatrix = toMatrix(this.currentTransform(transformation));\n        return this.rect().bbox(combinedMatrix);\n    }\n\n    rawBBox() {\n        return this.rect().bbox();\n    }\n\n    _containsPoint(point) {\n        return this.rect().containsPoint(point);\n    }\n}\n\nText.prototype.nodeType = \"Text\";\n\nPaintable.extend(Text.prototype);\n\ndefinePointAccessors(Text.prototype, [ \"position\" ]);\n\nexport default Text;"],"names":["const","super"],"mappings":"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"}