{"version":3,"file":"animation.js","sources":["animation.js"],"sourcesContent":["import * as easingFunctions from './easing-functions';\nimport { limitValue } from '../util';\nimport { animationFrame, Class } from '../common';\n\nconst now = Date.now || function() {\n    return new Date().getTime();\n};\n\nclass Animation extends Class {\n    constructor(element, options) {\n        super();\n\n        this.options = Object.assign({}, this.options, options);\n        this.element = element;\n    }\n\n    setup() {}\n    step() {}\n\n    play() {\n        const options = this.options;\n        const { duration, delay = 0 } = options;\n        const easing = easingFunctions[options.easing];\n        const start = now() + delay;\n        const finish = start + duration;\n\n        if (duration === 0) {\n            this.step(1);\n            this.abort();\n        } else {\n            setTimeout(() => {\n                const loop = () => {\n                    if (this._stopped) {\n                        return;\n                    }\n\n                    const wallTime = now();\n\n                    const time = limitValue(wallTime - start, 0, duration);\n                    const position = time / duration;\n                    const easingPosition = easing(position, time, 0, 1, duration);\n\n                    this.step(easingPosition);\n\n                    if (wallTime < finish) {\n                        animationFrame(loop);\n                    } else {\n                        this.abort();\n                    }\n                };\n\n                loop();\n            }, delay);\n        }\n    }\n\n    abort() {\n        this._stopped = true;\n    }\n\n    destroy() {\n        this.abort();\n    }\n}\n\nAnimation.prototype.options = {\n    duration: 500,\n    easing: \"swing\"\n};\n\nexport default Animation;"],"names":["const","super","this"],"mappings":"AAAA,OAAO,KAAK,eAAe,MAAM,oBAAoB,CAAC;AACtD,SAAS,UAAU,QAAQ,SAAS,CAAC;AACrC,SAAS,cAAc,EAAE,KAAK,QAAQ,WAAW,CAAC;;AAElDA,GAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,WAAW;IAC/B,OAAO,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;CAC/B,CAAC;;AAEF,IAAM,SAAS,GAAc;IAAC,AAC1B,kBAAW,CAAC,OAAO,EAAE,OAAO,EAAE;QAC1BC,KAAK,KAAA,CAAC,IAAA,CAAC,CAAC;;QAER,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;KAC1B;;;;gDAAA;;IAED,oBAAA,KAAK,kBAAA,GAAG,EAAE,CAAA;IACV,oBAAA,IAAI,iBAAA,GAAG,EAAE,CAAA;;IAET,oBAAA,IAAI,iBAAA,GAAG,CAAC;;AAAA;QACJD,GAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,AAAK,AAAG,IAAA,QAAQ;QAAU,2DAAA,CAAC,CAArB,AAAU,AAAW,AAAE,AAAU,AAAC;QACxCA,GAAK,CAAC,MAAM,GAAG,eAAe,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC/CA,GAAK,CAAC,KAAK,GAAG,GAAG,EAAE,GAAG,KAAK,CAAC;QAC5BA,GAAK,CAAC,MAAM,GAAG,KAAK,GAAG,QAAQ,CAAC;;QAEhC,IAAI,QAAQ,KAAK,CAAC,EAAE;YAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB,MAAM;YACH,UAAU,CAAC,SAAA,GAAG,AAAG;gBACbA,GAAK,CAAC,IAAI,GAAG,SAAA,GAAG,AAAG;oBACf,IAAIE,MAAI,CAAC,QAAQ,EAAE;wBACf,OAAO;qBACV;;oBAEDF,GAAK,CAAC,QAAQ,GAAG,GAAG,EAAE,CAAC;;oBAEvBA,GAAK,CAAC,IAAI,GAAG,UAAU,CAAC,QAAQ,GAAG,KAAK,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;oBACvDA,GAAK,CAAC,QAAQ,GAAG,IAAI,GAAG,QAAQ,CAAC;oBACjCA,GAAK,CAAC,cAAc,GAAG,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;;oBAE9DE,MAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;;oBAE1B,IAAI,QAAQ,GAAG,MAAM,EAAE;wBACnB,cAAc,CAAC,IAAI,CAAC,CAAC;qBACxB,MAAM;wBACHA,MAAI,CAAC,KAAK,EAAE,CAAC;qBAChB;iBACJ,CAAC;;gBAEF,IAAI,EAAE,CAAC;aACV,EAAE,KAAK,CAAC,CAAC;SACb;KACJ,CAAA;;IAED,oBAAA,KAAK,kBAAA,GAAG;QACJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACxB,CAAA;;IAED,oBAAA,OAAO,oBAAA,GAAG;QACN,IAAI,CAAC,KAAK,EAAE,CAAC;KAChB,CAAA,AACJ;;;EAvDuB,KAuDvB,GAAA;;AAED,SAAS,CAAC,SAAS,CAAC,OAAO,GAAG;IAC1B,QAAQ,EAAE,GAAG;IACb,MAAM,EAAE,OAAO;CAClB,CAAC;;AAEF,eAAe,SAAS"}