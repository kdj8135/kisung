{"version":3,"file":"surface-cursor.js","sources":["surface-cursor.js"],"sourcesContent":["import { defined } from '../util';\n\nclass SurfaceCursor {\n\n    constructor(surface) {\n        surface.bind(\"mouseenter\", this._mouseenter.bind(this));\n        surface.bind(\"mouseleave\", this._mouseleave.bind(this));\n\n        this.element = surface.element;\n    }\n\n    clear() {\n        this._resetCursor();\n    }\n\n    destroy() {\n        this._resetCursor();\n        delete this.element;\n    }\n\n    _mouseenter(e) {\n        const cursor = this._shapeCursor(e);\n\n        if (!cursor) {\n            this._resetCursor();\n        } else {\n            if (!this._current) {\n                this._defaultCursor = this._getCursor();\n            }\n\n            this._setCursor(cursor);\n        }\n    }\n\n    _mouseleave() {\n        this._resetCursor();\n    }\n\n    _shapeCursor(e) {\n        let shape = e.element;\n\n        while (shape && !defined(shape.options.cursor)) {\n            shape = shape.parent;\n        }\n\n        if (shape) {\n            return shape.options.cursor;\n        }\n    }\n\n    _getCursor() {\n        if (this.element) {\n            return this.element.style.cursor;\n        }\n    }\n\n    _setCursor(cursor) {\n        if (this.element) {\n            this.element.style.cursor = cursor;\n            this._current = cursor;\n        }\n    }\n\n    _resetCursor() {\n        if (this._current) {\n            this._setCursor(this._defaultCursor || \"\");\n            delete this._current;\n        }\n    }\n}\n\nexport default SurfaceCursor;\n\n"],"names":["const","let"],"mappings":"AAAA,SAAS,OAAO,QAAQ,SAAS,CAAC;;AAElC,IAAM,aAAa,GAAC,AAEpB,AAAI,sBAAW,CAAC,OAAO,EAAE;IACrB,AAAI,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5D,AAAI,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAE5D,AAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;AACvC,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,KAAK,kBAAA,GAAG;IACR,AAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AAC5B,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,OAAO,oBAAA,GAAG;IACV,AAAI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,AAAI,OAAO,IAAI,CAAC,OAAO,CAAC;AAC5B,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,WAAW,wBAAA,CAAC,CAAC,EAAE;IACf,AAAIA,GAAK,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;;IAExC,AAAI,IAAI,CAAC,MAAM,EAAE;QACb,AAAI,IAAI,CAAC,YAAY,EAAE,CAAC;IAC5B,AAAI,CAAC,MAAM;QACP,AAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACpB,AAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAChD,AAAI,CAAC;;QAEL,AAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;IAChC,AAAI,CAAC;AACT,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,WAAW,wBAAA,GAAG;IACd,AAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AAC5B,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,YAAY,yBAAA,CAAC,CAAC,EAAE;IAChB,AAAIC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;;IAE1B,AAAI,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;QAChD,AAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;IAC7B,AAAI,CAAC;;IAEL,AAAI,IAAI,KAAK,EAAE;QACX,AAAI,OAAO,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;IACpC,AAAI,CAAC;AACT,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,UAAU,uBAAA,GAAG;IACb,AAAI,IAAI,IAAI,CAAC,OAAO,EAAE;QAClB,AAAI,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;IACzC,AAAI,CAAC;AACT,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,UAAU,uBAAA,CAAC,MAAM,EAAE;IACnB,AAAI,IAAI,IAAI,CAAC,OAAO,EAAE;QAClB,AAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;QACvC,AAAI,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;IAC/B,AAAI,CAAC;AACT,AAAI,CAAC,CAAA;;AAEL,AAAI,wBAAA,YAAY,yBAAA,GAAG;IACf,AAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;QACnB,AAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC;QAC/C,AAAI,OAAO,IAAI,CAAC,QAAQ,CAAC;IAC7B,AAAI,CAAC;AACT,AAAI,CAAC,CAAA,AACJ;;AAED,eAAe,aAAa,CAAC;;"}