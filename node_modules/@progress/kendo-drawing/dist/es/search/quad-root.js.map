{"version":3,"file":"quad-root.js","sources":["quad-root.js"],"sourcesContent":["import { Class } from '../common';\n\nclass QuadRoot extends Class {\n    constructor() {\n        super();\n\n        this.shapes = [];\n    }\n\n    _add(shape, bbox) {\n        this.shapes.push({\n            bbox: bbox,\n            shape: shape\n        });\n        shape._quadNode = this;\n    }\n\n    pointShapes(point) {\n        const shapes = this.shapes;\n        const length = shapes.length;\n        const result = [];\n        for (let idx = 0; idx < length; idx++) {\n            if (shapes[idx].bbox.containsPoint(point)) {\n                result.push(shapes[idx].shape);\n            }\n        }\n        return result;\n    }\n\n    insert(shape, bbox) {\n        this._add(shape, bbox);\n    }\n\n    remove(shape) {\n        const shapes = this.shapes;\n        const length = shapes.length;\n\n        for (let idx = 0; idx < length; idx++) {\n            if (shapes[idx].shape === shape) {\n                shapes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n}\n\nexport default QuadRoot;"],"names":["super","const","let"],"mappings":"AAAA,SAAS,KAAK,QAAQ,WAAW,CAAC;;AAElC,IAAM,QAAQ,GAAc;IAAC,AACzB,iBAAW,GAAG;QACVA,KAAK,KAAA,CAAC,IAAA,CAAC,CAAC;;QAER,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;KACpB;;;;8CAAA;;IAED,mBAAA,IAAI,iBAAA,CAAC,KAAK,EAAE,IAAI,EAAE;QACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACb,IAAI,EAAE,IAAI;YACV,KAAK,EAAE,KAAK;SACf,CAAC,CAAC;QACH,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;KAC1B,CAAA;;IAED,mBAAA,WAAW,wBAAA,CAAC,KAAK,EAAE;QACfC,GAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3BA,GAAK,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QAC7BA,GAAK,CAAC,MAAM,GAAG,EAAE,CAAC;QAClB,KAAKC,GAAG,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,EAAE,GAAG,EAAE,EAAE;YACnC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE;gBACvC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;aAClC;SACJ;QACD,OAAO,MAAM,CAAC;KACjB,CAAA;;IAED,mBAAA,MAAM,mBAAA,CAAC,KAAK,EAAE,IAAI,EAAE;QAChB,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KAC1B,CAAA;;IAED,mBAAA,MAAM,mBAAA,CAAC,KAAK,EAAE;QACVD,GAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3BA,GAAK,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;;QAE7B,KAAKC,GAAG,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,EAAE,GAAG,EAAE,EAAE;YACnC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK,KAAK,EAAE;gBAC7B,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBACtB,MAAM;aACT;SACJ;KACJ,CAAA,AACJ;;;EA1CsB,KA0CtB,GAAA;;AAED,eAAe,QAAQ"}