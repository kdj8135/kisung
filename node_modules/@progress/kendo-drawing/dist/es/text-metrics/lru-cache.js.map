{"version":3,"file":"lru-cache.js","sources":["lru-cache.js"],"sourcesContent":["import { Class } from '../common';\n\nclass LRUCache extends Class {\n    constructor(size) {\n        super();\n\n        this._size = size;\n        this._length = 0;\n        this._map = {};\n    }\n\n    put(key, value) {\n        const map = this._map;\n        const entry = { key: key, value: value };\n\n        map[key] = entry;\n\n        if (!this._head) {\n            this._head = this._tail = entry;\n        } else {\n            this._tail.newer = entry;\n            entry.older = this._tail;\n            this._tail = entry;\n        }\n\n        if (this._length >= this._size) {\n            map[this._head.key] = null;\n            this._head = this._head.newer;\n            this._head.older = null;\n        } else {\n            this._length++;\n        }\n    }\n\n    get(key) {\n        const entry = this._map[key];\n\n        if (entry) {\n            if (entry === this._head && entry !== this._tail) {\n                this._head = entry.newer;\n                this._head.older = null;\n            }\n\n            if (entry !== this._tail) {\n                if (entry.older) {\n                    entry.older.newer = entry.newer;\n                    entry.newer.older = entry.older;\n                }\n\n                entry.older = this._tail;\n                entry.newer = null;\n\n                this._tail.newer = entry;\n                this._tail = entry;\n            }\n\n            return entry.value;\n        }\n    }\n}\n\nexport default LRUCache;"],"names":["super","const"],"mappings":"AAAA,SAAS,KAAK,QAAQ,WAAW,CAAC;;AAElC,IAAM,QAAQ,GAAc;IAAC,AACzB,iBAAW,CAAC,IAAI,EAAE;QACdA,KAAK,KAAA,CAAC,IAAA,CAAC,CAAC;;QAER,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;KAClB;;;;8CAAA;;IAED,mBAAA,GAAG,gBAAA,CAAC,GAAG,EAAE,KAAK,EAAE;QACZC,GAAK,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACtBA,GAAK,CAAC,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;;QAEzC,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;;QAEjB,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACb,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACnC,MAAM;YACH,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;YACzB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACtB;;QAED,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,EAAE;YAC5B,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;SAC3B,MAAM;YACH,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;KACJ,CAAA;;IAED,mBAAA,GAAG,gBAAA,CAAC,GAAG,EAAE;QACLA,GAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;QAE7B,IAAI,KAAK,EAAE;YACP,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;gBAC9C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;gBACzB,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;aAC3B;;YAED,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;gBACtB,IAAI,KAAK,CAAC,KAAK,EAAE;oBACb,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;oBAChC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;iBACnC;;gBAED,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBACzB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;;gBAEnB,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;gBACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;aACtB;;YAED,OAAO,KAAK,CAAC,KAAK,CAAC;SACtB;KACJ,CAAA,AACJ;;;EAzDsB,KAyDtB,GAAA;;AAED,eAAe,QAAQ"}