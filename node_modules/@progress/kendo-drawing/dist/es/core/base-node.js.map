{"version":3,"file":"base-node.js","sources":["base-node.js"],"sourcesContent":["import { Class } from '../common';\n\nclass BaseNode extends Class {\n    constructor(srcElement) {\n        super();\n\n        this.childNodes = [];\n        this.parent = null;\n\n        if (srcElement) {\n            this.srcElement = srcElement;\n            this.observe();\n        }\n    }\n\n    destroy() {\n        if (this.srcElement) {\n            this.srcElement.removeObserver(this);\n        }\n\n        const children = this.childNodes;\n        for (let i = 0; i < children.length; i++) {\n            this.childNodes[i].destroy();\n        }\n\n        this.parent = null;\n    }\n\n    load() {}\n\n    observe() {\n        if (this.srcElement) {\n            this.srcElement.addObserver(this);\n        }\n    }\n\n    append(node) {\n        this.childNodes.push(node);\n        node.parent = this;\n    }\n\n    insertAt(node, pos) {\n        this.childNodes.splice(pos, 0, node);\n        node.parent = this;\n    }\n\n    remove(index, count) {\n        const end = index + count;\n        for (let i = index; i < end; i++) {\n            this.childNodes[i].removeSelf();\n        }\n        this.childNodes.splice(index, count);\n    }\n\n    removeSelf() {\n        this.clear();\n        this.destroy();\n    }\n\n    clear() {\n        this.remove(0, this.childNodes.length);\n    }\n\n    invalidate() {\n        if (this.parent) {\n            this.parent.invalidate();\n        }\n    }\n\n    geometryChange() {\n        this.invalidate();\n    }\n\n    optionsChange() {\n        this.invalidate();\n    }\n\n    childrenChange(e) {\n        if (e.action === \"add\") {\n            this.load(e.items, e.index);\n        } else if (e.action === \"remove\") {\n            this.remove(e.index, e.items.length);\n        }\n\n        this.invalidate();\n    }\n}\n\nexport default BaseNode;"],"names":["super","const","let","this"],"mappings":"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"}