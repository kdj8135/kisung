{"version":3,"file":"observable.js","sources":["observable.js"],"sourcesContent":["import Class from './class';\n\nclass Observable extends Class {\n    constructor() {\n        super();\n\n        this._events = {};\n    }\n\n    bind(eventName, handlers, one) {\n        const eventNames = getArray(eventName);\n        const handlersIsFunction = isFunction(handlers);\n        const length = eventNames.length;\n\n        if (handlers === undefined) {\n            for (let field in eventName) {\n                this.bind(field, eventName[field]);\n            }\n            return this;\n        }\n\n        for (let idx = 0; idx < length; idx++) {\n            const eventName = eventNames[idx];\n\n            let handler = handlersIsFunction ? handlers : handlers[eventName];\n\n            if (handler) {\n                if (one) {\n                    const original = handler;\n                    handler = () => { // eslint-disable-line no-loop-func\n                        this.unbind(eventName, handler);\n                        original.apply(this, arguments);\n                    };\n                    handler.original = original;\n                }\n                let events = this._events[eventName] = this._events[eventName] || [];\n                events.push(handler);\n            }\n        }\n\n        return this;\n    }\n\n    one(eventNames, handlers) {\n        return this.bind(eventNames, handlers, true);\n    }\n\n    first(eventName, handlers) {\n        const eventNames = getArray(eventName);\n        const handlersIsFunction = isFunction(handlers);\n\n        for (let idx = 0, length = eventNames.length; idx < length; idx++) {\n            const eventName = eventNames[idx];\n\n            const handler = handlersIsFunction ? handlers : handlers[eventName];\n\n            if (handler) {\n                const events = this._events[eventName] = this._events[eventName] || [];\n                events.unshift(handler);\n            }\n        }\n\n        return this;\n    }\n\n    trigger(eventName, e = {}) {\n        let events = this._events[eventName];\n\n        if (events) {\n            const length = events.length;\n\n            e.sender = this;\n            e._defaultPrevented = false;\n            e.preventDefault = preventDefault;\n            e.isDefaultPrevented = isDefaultPrevented;\n\n            events = events.slice();\n\n            for (let idx = 0; idx < length; idx++) {\n                events[idx].call(this, e);\n            }\n\n            return e._defaultPrevented === true;\n        }\n\n        return false;\n    }\n\n    unbind(eventName, handler) {\n        const events = this._events[eventName];\n\n        if (eventName === undefined) {\n            this._events = {};\n        } else if (events) {\n            if (handler) {\n                for (let idx = events.length - 1; idx >= 0; idx--) {\n                    if (events[idx] === handler || events[idx].original === handler) {\n                        events.splice(idx, 1);\n                    }\n                }\n            } else {\n                this._events[eventName] = [];\n            }\n        }\n\n        return this;\n    }\n}\n\nfunction isFunction(value) {\n    return typeof value === \"function\";\n}\n\nfunction getArray(value) {\n    return typeof value === \"string\" ? [ value ] : value;\n}\n\nfunction preventDefault() {\n    this._defaultPrevented = true;\n}\n\nfunction isDefaultPrevented() {\n    return this._defaultPrevented === true;\n}\n\nexport default Observable;"],"names":["super","idx","eventName","const","let","this","arguments"],"mappings":"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"}