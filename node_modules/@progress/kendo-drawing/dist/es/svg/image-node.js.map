{"version":3,"file":"image-node.js","sources":["image-node.js"],"sourcesContent":["import PathNode from './path-node';\nimport NODE_MAP from './node-map';\nimport renderAllAttr from './utils/render-all-attributes';\nimport { htmlEncode } from '../common';\n\nclass ImageNode extends PathNode {\n\n    geometryChange() {\n        this.allAttr(this.mapPosition());\n        this.invalidate();\n    }\n\n    optionsChange(e) {\n        if (e.field === \"src\") {\n            this.allAttr(this.mapSource());\n        }\n\n        super.optionsChange(e);\n    }\n\n    mapPosition() {\n        const rect = this.srcElement.rect();\n        const tl = rect.topLeft();\n\n        return [\n            [ \"x\", tl.x ],\n            [ \"y\", tl.y ],\n            [ \"width\", rect.width() + \"px\" ],\n            [ \"height\", rect.height() + \"px\" ]\n        ];\n    }\n\n    renderPosition() {\n        return renderAllAttr(this.mapPosition());\n    }\n\n    mapSource(encode) {\n        let src = this.srcElement.src();\n\n        if (encode) {\n            src = htmlEncode(src);\n        }\n\n        return [ [ \"xlink:href\", src ] ];\n    }\n\n    renderSource() {\n        return renderAllAttr(this.mapSource(true));\n    }\n\n    template() {\n        return `<image preserveAspectRatio='none' ${ this.renderId() } ${ this.renderStyle() } ${ this.renderTransform()} ${ this.renderOpacity() }` +\n               `${ this.renderPosition() } ${ this.renderSource() } ${ this.renderDefinitions()}>` +\n               `</image>`;\n    }\n}\n\nNODE_MAP.Image = ImageNode;\n\nexport default ImageNode;"],"names":["super","const","let"],"mappings":"AAAA,OAAO,QAAQ,MAAM,aAAa,CAAC;AACnC,OAAO,QAAQ,MAAM,YAAY,CAAC;AAClC,OAAO,aAAa,MAAM,+BAA+B,CAAC;AAC1D,SAAS,UAAU,QAAQ,WAAW,CAAC;;AAEvC,IAAM,SAAS,GAAiB;IAAC;;;;;;;;IAAA,AAE7B,oBAAA,cAAc,2BAAA,GAAG;QACb,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;QACjC,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB,CAAA;;IAED,oBAAA,aAAa,0BAAA,CAAC,CAAC,EAAE;QACb,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,EAAE;YACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;SAClC;;QAEDA,kBAAK,CAAC,aAAa,KAAA,CAAC,MAAA,CAAC,CAAC,CAAC;KAC1B,CAAA;;IAED,oBAAA,WAAW,wBAAA,GAAG;QACVC,GAAK,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACpCA,GAAK,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;;QAE1B,OAAO;YACH,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE;YACb,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE;YACb,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,GAAG,IAAI,EAAE;YAChC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,EAAE;SACrC,CAAC;KACL,CAAA;;IAED,oBAAA,cAAc,2BAAA,GAAG;QACb,OAAO,aAAa,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;KAC5C,CAAA;;IAED,oBAAA,SAAS,sBAAA,CAAC,MAAM,EAAE;QACdC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;;QAEhC,IAAI,MAAM,EAAE;YACR,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;SACzB;;QAED,OAAO,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,EAAE,CAAC;KACpC,CAAA;;IAED,oBAAA,YAAY,yBAAA,GAAG;QACX,OAAO,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;KAC9C,CAAA;;IAED,oBAAA,QAAQ,qBAAA,GAAG;QACP,OAAO,oCAAmC,IAAG,IAAI,CAAC,QAAQ,EAAE,CAAA,MAAG,IAAG,IAAI,CAAC,WAAW,EAAE,CAAA,MAAG,IAAG,IAAI,CAAC,eAAe,EAAE,CAAA,MAAE,IAAG,IAAI,CAAC,aAAa,EAAE,CAAA,AAAG;eACrI,CAAI,IAAI,CAAC,cAAc,EAAE,CAAA,MAAG,IAAG,IAAI,CAAC,YAAY,EAAE,CAAA,MAAG,IAAG,IAAI,CAAC,iBAAiB,EAAE,CAAA,MAAE,AAAC;eACnF,UAAS,AAAC,CAAC;KACrB,CAAA,AACJ;;;EAlDuB,QAkDvB,GAAA;;AAED,QAAQ,CAAC,KAAK,GAAG,SAAS,CAAC;;AAE3B,eAAe,SAAS"}