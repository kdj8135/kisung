{"version":3,"file":"main.js","sources":["save-as.js","base64.js"],"sourcesContent":["export function saveAs(data, fileName, options = {}) {\n  let save = postToProxy;\n\n  if (options.forceProxy && !options.proxyURL) {\n    throw new Error('No proxyURL is set, but forceProxy is true');\n  }\n\n  if (!options.forceProxy) {\n    if (canDownload()) {\n      save = saveAsDataURI;\n    }\n\n    if (navigator.msSaveBlob) {\n      save = saveAsBlob;\n    }\n  }\n\n  save(data, fileName, options);\n}\n\nconst anchor = () => document.createElement('a');\nconst canDownload = () => 'download' in anchor();\n\nfunction saveAsBlob(data, fileName) {\n  let blob = data; // could be a Blob object\n\n  if (typeof data === 'string') {\n    const parts = data.split(';base64,');\n    const contentType = parts[0];\n    const base64 = atob(parts[1]);\n    const array = new Uint8Array(base64.length);\n\n    for (let idx = 0; idx < base64.length; idx++) {\n      array[idx] = base64.charCodeAt(idx);\n    }\n\n    blob = new Blob([ array.buffer ], { type: contentType });\n  }\n\n  navigator.msSaveBlob(blob, fileName);\n}\n\nfunction saveAsDataURI(data, fileName) {\n  let dataURI = data;\n  if (window.Blob && data instanceof Blob) {\n    dataURI = URL.createObjectURL(data);\n  }\n\n  const fileSaver = anchor();\n  fileSaver.download = fileName;\n  fileSaver.href = dataURI;\n\n  const e = document.createEvent('MouseEvents');\n  e.initMouseEvent('click', true, false, window,\n  0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\n  fileSaver.dispatchEvent(e);\n  setTimeout(() => URL.revokeObjectURL(dataURI));\n}\n\nfunction postToProxy(dataURI, fileName, options) {\n  if (!options.proxyURL) {\n    return;\n  }\n\n  const form = document.createElement('form');\n  form.setAttribute('action', options.proxyURL);\n  form.setAttribute('method', 'POST');\n  form.setAttribute('target', options.proxyTarget || '_self');\n\n  const formData = options.proxyData || {};\n  formData.fileName = fileName;\n\n  const parts = dataURI.split(\";base64,\");\n  formData.contentType = parts[0].replace(\"data:\", \"\");\n  formData.base64 = parts[1];\n\n  for (let name in formData) {\n    if (formData.hasOwnProperty(name)) {\n      const input = document.createElement('input');\n      input.setAttribute('type', 'hidden');\n      input.setAttribute('name', name);\n      input.setAttribute('value', formData[name]);\n\n      form.appendChild(input);\n    }\n  }\n\n  document.body.appendChild(form);\n  form.submit();\n  document.body.removeChild(form);\n}\n\n","const KEY_STR = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nconst fromCharCode = String.fromCharCode;\n\nexport function encodeBase64(plainText) {\n  const input = encodeUTF8(plainText);\n  let output = \"\";\n  let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n  let i = 0;\n\n  while (i < input.length) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n\n    if (isNaN(chr2)) {\n      enc3 = enc4 = 64;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n\n    output = output +\n      KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) +\n      KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\n  }\n\n  return output;\n}\n\nfunction encodeUTF8(input) {\n  let output = \"\";\n\n  for (let i = 0; i < input.length; i++) {\n    const c = input.charCodeAt(i);\n\n    if (c < 0x80) {\n      // One byte\n      output += fromCharCode(c);\n    } else if (c < 0x800) {\n      // Two bytes\n      output += fromCharCode(0xC0 | (c >>> 6));\n      output += fromCharCode(0x80 | (c & 0x3f));\n    } else if (c < 0x10000) {\n      // Three bytes\n      output += fromCharCode(0xE0 | (c >>> 12));\n      output += fromCharCode(0x80 | (c >>> 6 & 0x3f));\n      output += fromCharCode(0x80 | (c & 0x3f));\n    }\n  }\n\n  return output;\n}\n"],"names":["let","const"],"mappings":"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"}