{"version":3,"file":"format-date.js","sources":["format-date.js"],"sourcesContent":["import { localeInfo, firstDay } from '../cldr';\nimport { DEFAULT_LOCALE, EMPTY } from '../common/constants';\nimport formatString from '../common/format-string';\nimport datePattern from './date-pattern';\nimport formatNames from './format-names';\nimport pad from '../common/pad';\nimport isDate from '../common/is-date';\nimport { dateFormatRegExp } from './constants';\n\nfunction formatDayOfWeekIndex(day, formatLength, localeInfo) {\n    const firstDayIndex = firstDay(localeInfo);\n    let dayIndex;\n    if (day < firstDayIndex) {\n        dayIndex = 7 - firstDayIndex + day;\n    } else {\n        dayIndex = day - firstDayIndex;\n    }\n\n    return dayIndex + 1;\n}\n\nfunction formatMonth(month, formatLength, info, standAlone) {\n    if (formatLength <= 2) {\n        return pad(month + 1, formatLength);\n    }\n    return formatNames(info, \"months\", formatLength, standAlone)[month];\n}\n\nfunction formatQuarter(date, formatLength, info, standAlone) {\n    const quarter = Math.floor(date.getMonth() / 3);\n    if (formatLength < 3) {\n        return quarter + 1;\n    }\n\n    return formatNames(info, \"quarters\", formatLength, standAlone)[quarter];\n}\n\n\nfunction formatTimeZone(date, info, options) {\n    const { shortHours, optionalMinutes, separator, localizedName, zZeroOffset } = options;\n    const offset = date.getTimezoneOffset() / 60;\n    if (offset === 0 && zZeroOffset) {\n        return \"Z\";\n    }\n    const sign = offset <= 0 ? \"+\" : \"-\";\n    const hoursMinutes = Math.abs(offset).toString().split(\".\");\n    const minutes = hoursMinutes[1] || 0;\n    let result = sign + (shortHours ? hoursMinutes[0] : pad(hoursMinutes[0], 2));\n    if (minutes || !optionalMinutes) {\n        result += (separator ? \":\" : EMPTY) + pad(minutes, 2);\n    }\n\n    if (localizedName) {\n        const localizedFormat = offset === 0 ? info.calendar.gmtZeroFormat : info.calendar.gmtFormat;\n        result = formatString(localizedFormat, result);\n    }\n\n    return result;\n}\n\nfunction formatDayOfWeek(date, formatLength, info, standAlone) {\n    let result;\n    if (formatLength < 3) {\n        result = formatDayOfWeekIndex(date.getDay(), formatLength, info);\n    } else {\n        result = formatNames(info, \"days\", formatLength, standAlone)[date.getDay()];\n    }\n    return result;\n}\n\nconst formatters = {};\n\nformatters.d = function(date, formatLength) {\n    return pad(date.getDate(), formatLength);\n};\n\nformatters.E = function(date, formatLength, info) {\n    return formatNames(info, \"days\", formatLength)[date.getDay()];\n};\n\nformatters.M = function(date, formatLength, info) {\n    return formatMonth(date.getMonth(), formatLength, info, false);\n};\n\nformatters.L = function(date, formatLength, info) {\n    return formatMonth(date.getMonth(), formatLength, info, true);\n};\n\nformatters.y = function(date, formatLength) {\n    let year = date.getFullYear();\n    if (formatLength === 2) {\n        year = year % 100;\n    }\n    return pad(year, formatLength);\n};\n\nformatters.h = function(date, formatLength) {\n    const hours = date.getHours() % 12 || 12;\n    return pad(hours, formatLength);\n};\n\nformatters.H = function(date, formatLength) {\n    return pad(date.getHours(), formatLength);\n};\n\nformatters.k = function(date, formatLength) {\n    return pad(date.getHours() || 24, formatLength);\n};\n\nformatters.K = function(date, formatLength) {\n    return pad(date.getHours() % 12, formatLength);\n};\n\nformatters.m = function(date, formatLength) {\n    return pad(date.getMinutes(), formatLength);\n};\n\nformatters.s = function(date, formatLength) {\n    return pad(date.getSeconds(), formatLength);\n};\n\nformatters.S = function(date, formatLength) {\n    const milliseconds = date.getMilliseconds();\n    let result;\n    if (milliseconds !== 0) {\n        result = String(date.getMilliseconds() / 1000).split(\".\")[1].substr(0, formatLength);\n    } else {\n        result = pad(EMPTY, formatLength);\n    }\n    return result;\n};\n\nformatters.a = function(date, formatLength, info) {\n    return formatNames(info, \"dayPeriods\", formatLength)[date.getHours() < 12 ? \"am\" : \"pm\"];\n};\n\nformatters.z = function(date, formatLength, info) {\n    return formatTimeZone(date, info, {\n        shortHours: formatLength < 4,\n        optionalMinutes: formatLength < 4,\n        separator: true,\n        localizedName: true\n    });\n};\n\nformatters.Z = function(date, formatLength, info) {\n    return formatTimeZone(date, info, {\n        separator: formatLength > 3,\n        localizedName: formatLength === 4,\n        zZeroOffset: formatLength === 5\n    });\n};\n\nformatters.x = function(date, formatLength, info) {\n    return formatTimeZone(date, info, {\n        optionalMinutes: formatLength === 1,\n        separator: formatLength === 3 || formatLength === 5\n    });\n};\n\nformatters.X = function(date, formatLength, info) {\n    return formatTimeZone(date, info, {\n        optionalMinutes: formatLength === 1,\n        separator: formatLength === 3 || formatLength === 5,\n        zZeroOffset: true\n    });\n};\n\nformatters.G = function(date, formatLength, info) {\n    let era = date.getFullYear() >= 0 ? 1 : 0;\n    return formatNames(info, \"eras\", formatLength)[era];\n};\n\nformatters.e = formatDayOfWeek;\n\nformatters.c = function(date, formatLength, info) {\n    return formatDayOfWeek(date, formatLength, info, true);\n};\n\nformatters.q = function(date, formatLength, info) {\n    return formatQuarter(date, formatLength, info, true);\n};\n\nformatters.Q = formatQuarter;\n\nexport default function formatDate(date, format, locale = DEFAULT_LOCALE) {\n    if (!isDate(date)) {\n        if (date === undefined || date === null) {\n            return EMPTY;\n        }\n        return date;\n    }\n\n    const info = localeInfo(locale);\n    const pattern = datePattern(format, info);\n\n    return pattern.replace(dateFormatRegExp, function(match) {\n        let formatLength = match.length;\n        let result;\n\n        if (match.includes(\"'\") || match.includes(\"\\\"\")) {\n            result = match.slice(1, formatLength - 1);\n        } else {\n            result = formatters[match[0]](date, formatLength, info);\n        }\n\n        return result;\n    });\n}\n"],"names":["const","let"],"mappings":"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"}