{"version":3,"file":"load-dates.js","sources":["load-dates.js"],"sourcesContent":["import { cldr } from './info';\n\nconst predefinedDatePatterns = {\n    s: \"yyyy'-'MM'-'dd'T'HH':'mm':'ss\",\n    u: \"yyyy'-'MM'-'dd HH':'mm':'ss'Z'\"\n};\nconst datePatterns = {\n    d: [ [ \"dateTimeFormats\", \"availableFormats\", \"yMd\" ] ],\n    D: [ [ \"dateFormats\", \"full\" ] ],\n    m: [ [ \"dateTimeFormats\", \"availableFormats\", \"MMMd\" ] ],\n    M: [ [ \"dateTimeFormats\", \"availableFormats\", \"MMMMd\" ] ],\n    y: [ [ \"dateTimeFormats\", \"availableFormats\", \"yMMM\" ] ],\n    Y: [ [ \"dateTimeFormats\", \"availableFormats\", \"yMMMM\" ] ],\n    F: [ [ \"dateFormats\", \"full\" ], [ \"timeFormats\", \"medium\" ] ],\n    g: [ [ \"dateTimeFormats\", \"availableFormats\", \"yMd\" ], [ \"timeFormats\", \"short\" ] ],\n    G: [ [ \"dateTimeFormats\", \"availableFormats\", \"yMd\" ], [ \"timeFormats\", \"medium\" ] ],\n    t: [ [ \"timeFormats\", \"short\" ] ],\n    T: [ [ \"timeFormats\", \"medium\" ] ]\n};\n\nfunction toArray(obj) {\n    let result = [];\n    let names = Object.getOwnPropertyNames(obj);\n    for (let idx = 0; idx < names.length; idx++) {\n        let value = obj[names[idx]];\n        result.push(value);\n    }\n    return result;\n}\n\nfunction getCalendarNames(info, isObj) {\n    const result = {};\n    for (let formatType in info) {\n        let names = result[formatType] = {};\n        for (let format in info[formatType]) {\n            let formats = info[formatType][format];\n            names[format] = isObj ? formats : toArray(formats);\n        }\n    }\n    return result;\n}\n\nfunction getEraNames(eras) {\n    const result = {};\n    const format = result.format = {};\n    const eraNameMap = {\n        eraAbbr: \"abbreviated\",\n        eraNames: \"wide\",\n        eraNarrow: \"narrow\"\n    };\n\n    for (let eraFormatName in eras) {\n        let formatName = eraNameMap[eraFormatName];\n        format[formatName] = eras[eraFormatName];\n    }\n\n    return result;\n}\n\nfunction loadCalendarNames(locale, calendar) {\n    const localeCalendar = cldr[locale].calendar;\n    localeCalendar.days = getCalendarNames(calendar.days);\n    localeCalendar.months = getCalendarNames(calendar.months);\n    localeCalendar.quarters = getCalendarNames(calendar.quarters);\n    localeCalendar.dayPeriods = getCalendarNames(calendar.dayPeriods, true);\n\n    localeCalendar.eras = getEraNames(calendar.eras);\n}\n\nfunction loadCalendarDateFields(locale, fields) {\n    const localeCalendar = cldr[locale].calendar;\n    const dateFields = {};\n\n    for (let field in fields) {\n        const [ fieldName, formatType = 'wide' ] = field.split('-');\n        const fieldInfo = dateFields[fieldName] || {};\n        const displayName = fields[field].displayName;\n\n        if (!displayName) { continue; }\n\n        fieldInfo[formatType] = displayName;\n        dateFields[fieldName] = fieldInfo;\n    }\n\n    localeCalendar.dateFields = dateFields;\n}\n\nfunction getPredefinedFormat(paths, calendar) {\n    const result = [];\n\n    for (let pathIdx = 0; pathIdx < paths.length; pathIdx++) {\n        let fields = paths[ pathIdx ];\n        let pattern = calendar;\n        for (let idx = 0; idx < fields.length; idx++) {\n            pattern = pattern[fields[idx]];\n        }\n        result.push(pattern);\n    }\n\n    return result.join(\" \");\n}\n\nfunction loadCalendarPatterns(locale, calendar) {\n    const cldrCalendar = cldr[locale].calendar;\n    const patterns = cldrCalendar.patterns = {};\n    for (let pattern in datePatterns) {\n        patterns[pattern] = getPredefinedFormat(datePatterns[pattern], calendar);\n    }\n\n    for (let pattern in predefinedDatePatterns) {\n        patterns[pattern] = predefinedDatePatterns[pattern];\n    }\n\n    const dateTimeFormats = calendar.dateTimeFormats;\n    cldrCalendar.dateTimeFormats = {\n        full: dateTimeFormats.full,\n        long: dateTimeFormats.long,\n        medium: dateTimeFormats.medium,\n        short: dateTimeFormats.short,\n        availableFormats: dateTimeFormats.availableFormats\n    };\n    cldrCalendar.timeFormats = calendar.timeFormats;\n    cldrCalendar.dateFormats = calendar.dateFormats;\n}\n\n\nexport default function loadCalendarInfo(locale, info) {\n    const calendar = cldr[locale].calendar = cldr[locale].calendar || {};\n    for (let field in info) {\n        if (field === \"timeZoneNames\") {\n            calendar.gmtFormat = info[field].gmtFormat;\n            calendar.gmtZeroFormat = info[field].gmtZeroFormat;\n        } else if (field === \"calendars\" && info[field].gregorian) {\n            loadCalendarPatterns(locale, info[field].gregorian);\n            loadCalendarNames(locale, info[field].gregorian);\n        } else if (field === \"fields\") {\n            loadCalendarDateFields(locale, info.fields);\n        }\n    }\n}\n"],"names":["const","let","pattern"],"mappings":"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"}