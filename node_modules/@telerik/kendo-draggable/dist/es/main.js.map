{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["const proxy = (a, b) => (e) => b(a(e));\n\nconst bind = (el, event, callback) =>\n    el.addEventListener && el.addEventListener(event, callback);\n\nconst unbind = (el, event, callback) =>\n    el.removeEventListener && el.removeEventListener(event, callback);\n\nconst noop = () => { /* empty */ };\n\nconst touchRegExp = /touch/;\n\n// 300ms is the usual mouse interval;\n// // However, an underpowered mobile device under a heavy load may queue mouse events for a longer period.\nconst IGNORE_MOUSE_TIMEOUT = 2000;\n\nfunction normalizeEvent(e) {\n    if (e.type.match(touchRegExp)) {\n        return {\n            pageX: e.changedTouches[0].pageX,\n            pageY: e.changedTouches[0].pageY,\n            type: e.type,\n            originalEvent: e\n        };\n    }\n\n    return {\n        pageX: e.pageX,\n        pageY: e.pageY,\n        offsetX: e.offsetX,\n        offsetY: e.offsetY,\n        type: e.type,\n        ctrlKey: e.ctrlKey,\n        shiftKey: e.shiftKey,\n        altKey: e.altKey,\n        originalEvent: e\n    };\n}\n\nexport class Draggable {\n    static supportPointerEvent() {\n        return window.PointerEvent;\n    }\n\n    constructor({ press = noop, drag = noop, release = noop }) {\n        this._pressHandler = proxy(normalizeEvent, press);\n        this._dragHandler = proxy(normalizeEvent, drag);\n        this._releaseHandler = proxy(normalizeEvent, release);\n        this._ignoreMouse = false;\n        this._touchAction;\n\n        this._touchstart = (e) => {\n            if (e.touches.length === 1) {\n                this._pressHandler(e);\n            }\n        };\n\n        this._touchmove = (e) => {\n            if (e.touches.length === 1) {\n                this._dragHandler(e);\n            }\n        };\n\n        this._touchend = (e) => {\n            // the last finger has been lifted, and the user is not doing gesture.\n            // there might be a better way to handle this.\n            if (e.touches.length === 0 && e.changedTouches.length === 1) {\n                this._releaseHandler(e);\n                this._ignoreMouse = true;\n                setTimeout(this._restoreMouse, IGNORE_MOUSE_TIMEOUT);\n            }\n        };\n\n        this._restoreMouse = () => {\n            this._ignoreMouse = false;\n        };\n\n        this._mousedown = (e) => {\n            const { which } = e;\n\n            if ((which && which > 1) || this._ignoreMouse) {\n                return;\n            }\n\n            bind(document, \"mousemove\", this._mousemove);\n            bind(document, \"mouseup\", this._mouseup);\n            this._pressHandler(e);\n        };\n\n        this._mousemove = (e) => {\n            this._dragHandler(e);\n        };\n\n        this._mouseup = (e) => {\n            unbind(document, \"mousemove\", this._mousemove);\n            unbind(document, \"mouseup\", this._mouseup);\n            this._releaseHandler(e);\n        };\n\n        this._pointerdown = (e) => {\n            if (e.isPrimary) {\n                bind(this._element, \"pointermove\", this._pointermove);\n                this._touchAction = e.target.style.touchAction;\n                e.target.style.touchAction = \"none\";\n                e.target.setPointerCapture(e.pointerId);\n                this._pressHandler(e);\n            }\n        };\n\n        this._pointermove = (e) => {\n            if (e.isPrimary) {\n                this._dragHandler(e);\n            }\n        };\n\n        this._pointerup = (e) => {\n            if (e.isPrimary) {\n                unbind(this._element, \"pointermove\", this._pointermove);\n                e.target.style.touchAction = this._touchAction;\n                this._releaseHandler(e);\n            }\n        };\n    }\n\n    bindTo(element) {\n        if (element === this._element) {\n            return;\n        }\n\n        if (this._element) {\n            this._unbindFromCurrent();\n        }\n\n        this._element = element;\n\n        if (Draggable.supportPointerEvent()) {\n            bind(element, \"pointerdown\", this._pointerdown);\n            bind(element, \"pointerup\", this._pointerup);\n        } else {\n            bind(element, \"mousedown\", this._mousedown);\n            bind(element, \"touchstart\", this._touchstart);\n            bind(element, \"touchmove\", this._touchmove);\n            bind(element, \"touchend\", this._touchend);\n        }\n    }\n\n    _unbindFromCurrent() {\n        if (Draggable.supportPointerEvent()) {\n            unbind(this._element, \"pointerdown\", this._pointerdown);\n            unbind(this._element, \"pointermove\", this._pointermove);\n            unbind(this._element, \"pointerup\", this._pointerup);\n        } else {\n            unbind(this._element, \"mousedown\", this._mousedown);\n            unbind(this._element, \"touchstart\", this._touchstart);\n            unbind(this._element, \"touchmove\", this._touchmove);\n            unbind(this._element, \"touchend\", this._touchend);\n        }\n    }\n\n    destroy() {\n        this._unbindFromCurrent();\n        this._element = null;\n    }\n}\n\n// Rollup won't output exports['default'] otherwise\nexport default Draggable;\n\n"],"names":["const","this"],"mappings":"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"}